<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç∞ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–æ–±—ñ–≤–∞—Ä—Ç–æ—Å—Ç—ñ –≤–∏–ø—ñ—á–∫–∏ | Vivchar Solutions</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* –ë–ê–ó–û–í–Ü –°–¢–ò–õ–Ü - —Ç–µ —Å–∞–º–µ —â–æ –≤ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%); color: #333; min-height: 100vh; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; width: 100%; }
        
        /* –®–ê–ü–ö–ê */
        .header { background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); color: white; padding: 18px 0; box-shadow: 0 4px 20px rgba(106, 17, 203, 0.2); position: relative; overflow: hidden; }
        .header::before { content: ''; position: absolute; top: -50%; right: -50%; width: 100%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 30px 30px; opacity: 0.2; }
        .header-content { position: relative; z-index: 1; display: flex; flex-direction: column; align-items: center; gap: 18px; }
        @media (min-width: 768px) { .header-content { flex-direction: row; justify-content: space-between; } }
        .logo { display: flex; align-items: center; gap: 12px; text-align: center; }
        @media (min-width: 768px) { .logo { text-align: left; gap: 15px; } }
        .logo-icon { font-size: 30px; animation: float 3s ease-in-out infinite; flex-shrink: 0; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }
        .logo-text h1 { font-size: 19px; font-weight: 700; margin-bottom: 4px; line-height: 1.3; }
        .logo-text p { font-size: 12px; opacity: 0.9; line-height: 1.4; }
        @media (min-width: 768px) { .logo-icon { font-size: 34px; } .logo-text h1 { font-size: 22px; } .logo-text p { font-size: 13px; } }
        @media (min-width: 992px) { .logo-text h1 { font-size: 24px; } .logo-text p { font-size: 14px; } }
        
        /* –õ–Ü–ß–ò–õ–¨–ù–ò–ö */
        .counter { background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px); border-radius: 10px; padding: 10px 16px; text-align: center; border: 1px solid rgba(255, 255, 255, 0.2); width: 100%; max-width: 220px; }
        @media (min-width: 768px) { .counter { padding: 13px 22px; border-radius: 12px; width: auto; max-width: none; } }
        .counter-value { font-size: 26px; font-weight: 700; display: block; line-height: 1; margin-bottom: 4px; background: linear-gradient(to right, #ff7e5f, #feb47b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        @media (min-width: 768px) { .counter-value { font-size: 30px; } }
        @media (min-width: 992px) { .counter-value { font-size: 32px; } }
        .counter-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.8px; opacity: 0.9; }
        @media (min-width: 768px) { .counter-label { font-size: 11px; } }
        @media (min-width: 992px) { .counter-label { font-size: 12px; } }
        
        /* –û–°–ù–û–í–ù–ò–ô –ö–û–ù–¢–ï–ù–¢ */
        .main-content { display: grid; grid-template-columns: 1fr; gap: 18px; padding: 22px 0; }
        @media (min-width: 768px) { .main-content { grid-template-columns: 1fr 1fr; gap: 25px; padding: 35px 0; } }
        @media (min-width: 992px) { .main-content { gap: 30px; padding: 40px 0; } }
        
        /* –ö–ê–†–¢–ö–ò */
        .card { background: white; border-radius: 14px; padding: 18px; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08); border: 1px solid rgba(255, 255, 255, 0.5); transition: transform 0.3s, box-shadow 0.3s; height: fit-content; margin-bottom: 18px; }
        @media (min-width: 768px) { .card { padding: 25px; border-radius: 18px; margin-bottom: 0; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08); } }
        @media (min-width: 992px) { .card { padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08); } }
        .card:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12); }
        .card-header { display: flex; align-items: center; gap: 10px; margin-bottom: 18px; padding-bottom: 14px; border-bottom: 2px solid #f0f0f0; flex-wrap: wrap; }
        @media (min-width: 768px) { .card-header { gap: 12px; margin-bottom: 22px; padding-bottom: 15px; } }
        @media (min-width: 992px) { .card-header { margin-bottom: 25px; } }
        .card-icon { font-size: 18px; width: 42px; height: 42px; background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); color: white; border-radius: 9px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        @media (min-width: 768px) { .card-icon { font-size: 20px; width: 46px; height: 46px; border-radius: 10px; } }
        @media (min-width: 992px) { .card-icon { font-size: 24px; width: 50px; height: 50px; border-radius: 12px; } }
        .card-title { font-size: 17px; font-weight: 600; color: #2c3e50; flex: 1; line-height: 1.3; }
        @media (min-width: 768px) { .card-title { font-size: 18px; } }
        @media (min-width: 992px) { .card-title { font-size: 20px; } }
        
        /* –§–û–†–ú–ò */
        .form-group { margin-bottom: 16px; }
        @media (min-width: 768px) { .form-group { margin-bottom: 18px; } }
        .form-label { display: block; margin-bottom: 7px; font-weight: 600; color: #34495e; display: flex; align-items: center; gap: 7px; font-size: 13px; }
        @media (min-width: 768px) { .form-label { font-size: 14px; gap: 8px; margin-bottom: 8px; } }
        @media (min-width: 992px) { .form-label { font-size: inherit; } }
        .form-input, .form-select, .form-unit-select { width: 100%; padding: 13px; border: 2px solid #e8edf2; border-radius: 9px; font-size: 15px; font-family: inherit; transition: all 0.3s; background: #f9fafc; }
        .form-unit-select { padding: 13px 10px; max-width: 120px; }
        @media (min-width: 768px) { .form-input, .form-select, .form-unit-select { padding: 14px; border-radius: 10px; font-size: 16px; } .form-unit-select { padding: 14px 10px; max-width: 130px; } }
        @media (min-width: 992px) { .form-input, .form-select, .form-unit-select { padding: 15px; border-radius: 12px; } .form-unit-select { padding: 15px 10px; max-width: 140px; } }
        .form-input:focus, .form-select:focus, .form-unit-select:focus { outline: none; border-color: #6a11cb; background: white; box-shadow: 0 0 0 4px rgba(106, 17, 203, 0.1); }
        .input-with-unit { display: flex; gap: 10px; align-items: center; }
        .input-with-unit .form-input { flex: 1; }
        
        /* –ö–ù–û–ü–ö–ò */
        .btn { padding: 14px 18px; border: none; border-radius: 9px; font-size: 15px; font-weight: 600; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; gap: 9px; transition: all 0.3s; font-family: inherit; width: 100%; margin-top: 8px; }
        @media (min-width: 768px) { .btn { padding: 15px 24px; border-radius: 10px; font-size: 16px; gap: 10px; margin-top: 10px; } }
        @media (min-width: 992px) { .btn { padding: 16px 28px; border-radius: 12px; } }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 7px 20px rgba(102, 126, 234, 0.4); }
        .btn-success { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); color: white; }
        .btn-warning { background: linear-gradient(135deg, #f7971e 0%, #ffd200 100%); color: #333; }
        .btn-danger { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; }
        .btn-secondary { background: #f8f9fa; color: #495057; border: 2px solid #dee2e6; }
        
        /* –¢–ê–ë–õ–ò–¶–Ü */
        .table-container { overflow-x: auto; margin: 14px 0; border-radius: 9px; border: 1px solid #e8edf2; -webkit-overflow-scrolling: touch; }
        @media (min-width: 768px) { .table-container { margin: 18px 0; border-radius: 11px; } }
        @media (min-width: 992px) { .table-container { margin: 20px 0; border-radius: 12px; } }
        .table { width: 100%; border-collapse: collapse; min-width: 300px; }
        .table thead { background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); color: white; }
        .table th { padding: 15px 11px; text-align: left; font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 0.4px; white-space: nowrap; }
        @media (min-width: 768px) { .table th { padding: 16px 14px; font-size: 13px; } }
        @media (min-width: 992px) { .table th { padding: 18px 15px; font-size: 14px; } }
        .table td { padding: 13px 11px; border-bottom: 1px solid #e8edf2; font-size: 13px; }
        @media (min-width: 768px) { .table td { padding: 14px; font-size: 14px; } }
        @media (min-width: 992px) { .table td { padding: 15px; font-size: 15px; } }
        .table tbody tr:hover { background: #f9fafc; }
        
        /* –î–Ü–á –í –¢–ê–ë–õ–ò–¶–Ü */
        .action-btn { padding: 5px 9px; border: none; border-radius: 5px; cursor: pointer; font-size: 12px; transition: all 0.2s; display: inline-flex; align-items: center; gap: 4px; }
        @media (min-width: 768px) { .action-btn { padding: 7px 11px; font-size: 13px; gap: 5px; border-radius: 6px; } }
        @media (min-width: 992px) { .action-btn { padding: 8px 12px; font-size: 14px; } }
        .action-delete { background: #fee; color: #e74c3c; }
        .action-delete:hover { background: #fdd; }
        
        /* –†–ï–ó–£–õ–¨–¢–ê–¢–ò */
        .results-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 14px; margin: 18px 0; }
        @media (min-width: 480px) { .results-grid { gap: 18px; } }
        @media (min-width: 768px) { .results-grid { gap: 20px; margin: 22px 0; } }
        @media (min-width: 992px) { .results-grid { margin: 25px 0; } }
        @media (max-width: 350px) { .results-grid { grid-template-columns: 1fr; } }
        .result-item { background: #f9fafc; border-radius: 11px; padding: 14px; text-align: center; border: 2px solid transparent; transition: all 0.3s; }
        @media (min-width: 768px) { .result-item { padding: 18px; border-radius: 14px; } }
        @media (min-width: 992px) { .result-item { padding: 20px; border-radius: 15px; } }
        .result-item:hover { border-color: #6a11cb; transform: translateY(-3px); }
        .result-label { font-size: 11px; color: #7f8c8d; margin-bottom: 7px; display: flex; align-items: center; justify-content: center; gap: 5px; }
        @media (min-width: 768px) { .result-label { font-size: 12px; gap: 6px; margin-bottom: 8px; } }
        @media (min-width: 992px) { .result-label { font-size: 14px; gap: 8px; } }
        .result-value { font-size: 18px; font-weight: 700; color: #2c3e50; }
        @media (min-width: 768px) { .result-value { font-size: 21px; } }
        @media (min-width: 992px) { .result-value { font-size: 24px; } }
        
        /* –§–£–¢–ï–† */
        .footer { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; padding: 28px 0 18px; margin-top: 35px; position: relative; }
        @media (min-width: 768px) { .footer { padding: 40px 0 25px; margin-top: 50px; } }
        @media (min-width: 992px) { .footer { padding: 50px 0 30px; margin-top: 60px; } }
        .footer::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(to right, #6a11cb, #2575fc, #11998e); }
        .footer-content { display: grid; grid-template-columns: 1fr; gap: 28px; margin-bottom: 28px; }
        @media (min-width: 768px) { .footer-content { grid-template-columns: 2fr 1fr; gap: 35px; margin-bottom: 35px; } }
        @media (min-width: 992px) { .footer-content { gap: 40px; margin-bottom: 40px; } }
        .footer-logo { font-size: 22px; font-weight: 700; margin-bottom: 10px; background: linear-gradient(to right, #6a11cb, #2575fc); -webkit-background-clip: text; -webkit-text-fill-color: transparent; display: inline-block; text-align: center; width: 100%; }
        @media (min-width: 768px) { .footer-logo { font-size: 25px; text-align: left; width: auto; } }
        @media (min-width: 992px) { .footer-logo { font-size: 28px; margin-bottom: 15px; } }
        .footer-description { font-size: 13px; opacity: 0.8; line-height: 1.5; text-align: center; margin-bottom: 20px; }
        @media (min-width: 768px) { .footer-description { font-size: 14px; text-align: left; line-height: 1.6; max-width: 500px; margin-bottom: 0; } }
        @media (min-width: 992px) { .footer-description { font-size: 15px; line-height: 1.7; } }
        .telegram-btn { display: inline-flex; align-items: center; justify-content: center; gap: 9px; background: #0088cc; color: white; padding: 13px 22px; border-radius: 45px; text-decoration: none; font-weight: 600; font-size: 14px; transition: all 0.3s; border: 2px solid transparent; width: 100%; margin: 0 auto; }
        @media (min-width: 768px) { .telegram-btn { width: auto; padding: 15px 28px; font-size: 15px; } }
        @media (min-width: 992px) { .telegram-btn { padding: 16px 32px; font-size: 16px; } }
        .telegram-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(0, 136, 204, 0.3); border-color: white; background: #0077b3; }
        .footer-bottom { text-align: center; padding-top: 22px; border-top: 1px solid rgba(255, 255, 255, 0.1); font-size: 12px; opacity: 0.7; display: flex; flex-direction: column; align-items: center; gap: 14px; }
        @media (min-width: 768px) { .footer-bottom { flex-direction: row; justify-content: space-between; font-size: 13px; gap: 18px; padding-top: 25px; } }
        @media (min-width: 992px) { .footer-bottom { font-size: 14px; gap: 20px; padding-top: 30px; } }
        
        /* –ê–ù–Ü–ú–ê–¶–Ü–á –î–õ–Ø –°–ü–û–í–Ü–©–ï–ù–¨ */
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes slideOut { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }
        
        /* –î–û–î–ê–¢–ö–û–í–Ü –ï–õ–ï–ú–ï–ù–¢–ò */
        .badge { display: inline-block; padding: 3px 9px; border-radius: 15px; font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.4px; }
        @media (min-width: 768px) { .badge { padding: 4px 10px; font-size: 11px; border-radius: 18px; } }
        @media (min-width: 992px) { .badge { padding: 5px 12px; font-size: 12px; border-radius: 20px; } }
        .badge-success { background: rgba(56, 239, 125, 0.15); color: #11998e; }
        .badge-info { background: rgba(106, 17, 203, 0.15); color: #6a11cb; }
        .stats { display: flex; flex-direction: column; gap: 10px; margin-top: 18px; }
        @media (min-width: 768px) { .stats { flex-direction: row; gap: 14px; margin-top: 20px; } }
        .stat-item { display: flex; align-items: center; gap: 7px; font-size: 12px; color: #7f8c8d; }
        @media (min-width: 768px) { .stat-item { font-size: 13px; gap: 8px; } }
        
        /* –û–î–ò–ù–ò–¶–Ü –í–ò–ú–Ü–†–£ */
        .unit-info { font-size: 11px; color: #7f8c8d; margin-top: 5px; display: flex; align-items: center; gap: 5px; }
        .unit-tag { display: inline-block; padding: 2px 8px; background: #f0f7ff; border-radius: 10px; font-size: 10px; color: #2575fc; border: 1px solid #d0e3ff; }
        
        /* –ö–ù–û–ü–ö–ê –ü–†–û–ö–†–£–¢–ö–ò –í–í–ï–†–• */
        .scroll-top { position: fixed; bottom: 20px; right: 20px; width: 45px; height: 45px; background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; opacity: 0; visibility: hidden; transition: all 0.3s; z-index: 1000; box-shadow: 0 4px 15px rgba(106, 17, 203, 0.3); }
        .scroll-top.show { opacity: 1; visibility: visible; }
        @media (min-width: 768px) { .scroll-top { width: 50px; height: 50px; font-size: 22px; } }
        
        /* –ü–û–†–û–ñ–ù–Ü –°–¢–ê–ù–ò */
        .empty-state { text-align: center; padding: 40px 20px; color: #7f8c8d; }
        .empty-state i { font-size: 48px; margin-bottom: 15px; display: block; opacity: 0.5; }
        .empty-state p { font-size: 16px; margin-bottom: 10px; }
        .empty-state small { font-size: 13px; opacity: 0.7; }
    </style>
</head>
<body>
    <!-- –®–ê–ü–ö–ê –°–ê–ô–¢–£ -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üç∞</div>
                    <div class="logo-text">
                        <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–æ–±—ñ–≤–∞—Ä—Ç–æ—Å—Ç—ñ –≤–∏–ø—ñ—á–∫–∏</h1>
                        <p>–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–¥–∏—Ç–µ—Ä—ñ–≤ —Ç–∞ –ø–µ–∫–∞—Ä—ñ–≤</p>
                    </div>
                </div>
                <div class="counter">
                    <span class="counter-value" id="calculationCounter">0</span>
                    <span class="counter-label">—É—Å–ø—ñ—à–Ω–∏—Ö —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤</span>
                </div>
            </div>
        </div>
    </header>

    <!-- –û–°–ù–û–í–ù–ò–ô –ö–û–ù–¢–ï–ù–¢ -->
    <main class="container">
        <div class="main-content">
            <!-- –õ–Ü–í–ê –ö–û–õ–û–ù–ö–ê -->
            <div>
                <!-- –ö–ê–†–¢–ö–ê –î–û–î–ê–í–ê–ù–ù–Ø –Ü–ù–ì–†–ï–î–Ü–Ñ–ù–¢–Ü–í -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-plus-circle"></i></div>
                        <h2 class="card-title">–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç</h2>
                    </div>
                    <div class="form-group">
                        <label class="form-label"><i class="fas fa-tag"></i> –ù–∞–∑–≤–∞ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∞</label>
                        <input type="text" class="form-input" id="ingredientName" placeholder="–ë–æ—Ä–æ—à–Ω–æ, —è–π—Ü—è, –º–æ–ª–æ–∫–æ, –º–∞—Å–ª–æ...">
                    </div>
                    <div class="form-group">
                        <label class="form-label"><i class="fas fa-balance-scale"></i> –û–¥–∏–Ω–∏—Ü—è –≤–∏–º—ñ—Ä—É</label>
                        <select class="form-select" id="ingredientUnit">
                            <option value="kg">–ö—ñ–ª–æ–≥—Ä–∞–º (–∫–≥)</option>
                            <option value="g">–ì—Ä–∞–º (–≥)</option>
                            <option value="l">–õ—ñ—Ç—Ä (–ª)</option>
                            <option value="ml">–ú—ñ–ª—ñ–ª—ñ—Ç—Ä (–º–ª)</option>
                            <option value="pcs">–®—Ç—É–∫–∞ (—à—Ç.)</option>
                            <option value="package">–£–ø–∞–∫–æ–≤–∫–∞ (—É–ø.)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label"><i class="fas fa-money-bill-wave"></i> –¶—ñ–Ω–∞</label>
                        <div class="input-with-unit">
                            <input type="number" class="form-input" id="ingredientPrice" step="0.01" placeholder="30.00" min="0">
                            <span id="priceUnitLabel" style="white-space: nowrap; font-weight: 600; color: #2c3e50;">–≥—Ä–Ω/–∫–≥</span>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="addIngredient()"><i class="fas fa-save"></i> –ó–±–µ—Ä–µ–≥—Ç–∏ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç</button>
                    <div class="unit-info"><i class="fas fa-info-circle"></i> <span>–ü—Ä–∏–∫–ª–∞–¥: —è–π—Ü—è - "—à—Ç.", –º–æ–ª–æ–∫–æ - "–ª", –±–æ—Ä–æ—à–Ω–æ - "–∫–≥"</span></div>
                </div>

                <!-- –ö–ê–†–¢–ö–ê –°–ü–ò–°–ö–£ –Ü–ù–ì–†–ï–î–Ü–Ñ–ù–¢–Ü–í -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-list"></i></div>
                        <h2 class="card-title">–ú–æ—ó —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏</h2>
                        <div class="badge badge-info" id="ingredientCount">0</div>
                    </div>
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr><th>–ù–∞–∑–≤–∞</th><th>–¶—ñ–Ω–∞</th><th>–û–¥.</th><th>–î—ñ—ó</th></tr>
                            </thead>
                            <tbody id="ingredientsList"></tbody>
                        </table>
                    </div>
                    <div class="stats">
                        <div class="stat-item"><i class="fas fa-cube"></i> <span id="totalIngredients">0</span> —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤</div>
                        <div class="stat-item"><i class="fas fa-coins"></i> –°–µ—Ä–µ–¥–Ω—è —Ü—ñ–Ω–∞: <span id="avgPrice">0.00</span> –≥—Ä–Ω</div>
                    </div>
                    <div style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #f0f0f0;">
                        <h3 style="font-size: 16px; margin-bottom: 15px; color: #2c3e50;"><i class="fas fa-database"></i> –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <button class="btn btn-secondary" onclick="exportData()"><i class="fas fa-file-export"></i> –ï–∫—Å–ø–æ—Ä—Ç</button>
                            <button class="btn btn-secondary" onclick="exportToCSV()"><i class="fas fa-file-csv"></i> CSV</button>
                            <button class="btn btn-secondary" onclick="importData()" style="grid-column: span 2;"><i class="fas fa-file-import"></i> –Ü–º–ø–æ—Ä—Ç</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –ü–†–ê–í–ê –ö–û–õ–û–ù–ö–ê -->
            <div>
                <!-- –ö–ê–†–¢–ö–ê –†–û–ó–†–ê–•–£–ù–ö–£ –†–ï–¶–ï–ü–¢–£ -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-calculator"></i></div>
                        <h2 class="card-title">–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ä–µ—Ü–µ–ø—Ç—É</h2>
                    </div>
                    <div class="form-group">
                        <label class="form-label"><i class="fas fa-utensils"></i> –û–±–µ—Ä—ñ—Ç—å —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç</label>
                        <select class="form-select" id="recipeIngredient"><option value="">–û–±–µ—Ä—ñ—Ç—å —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç...</option></select>
                    </div>
                    <div class="form-group">
                        <label class="form-label"><i class="fas fa-weight"></i> –ö—ñ–ª—å–∫—ñ—Å—Ç—å</label>
                        <div class="input-with-unit">
                            <input type="number" class="form-input" id="recipeAmount" placeholder="–ö—ñ–ª—å–∫—ñ—Å—Ç—å" min="0" step="0.01">
                            <span id="amountUnitLabel" style="white-space: nowrap; font-weight: 600; color: #2c3e50; min-width: 60px;">--</span>
                        </div>
                    </div>
                    <button class="btn btn-success" onclick="addToRecipe()"><i class="fas fa-plus"></i> –î–æ–¥–∞—Ç–∏ –¥–æ —Ä–µ—Ü–µ–ø—Ç—É</button>
                    <div class="unit-info"><i class="fas fa-calculator"></i> <span>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç—É—î –æ–¥–∏–Ω–∏—Ü—ñ</span></div>
                </div>
                
                <!-- –ö–ê–†–¢–ö–ê –ü–û–¢–û–ß–ù–û–ì–û –†–ï–¶–ï–ü–¢–£ -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-clipboard-list"></i></div>
                        <h2 class="card-title">–ü–æ—Ç–æ—á–Ω–∏–π —Ä–µ—Ü–µ–ø—Ç</h2>
                        <div class="badge badge-success" id="recipeCount">0</div>
                    </div>
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr><th>–Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç</th><th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th><th>–í–∞—Ä—Ç—ñ—Å—Ç—å</th><th>–î—ñ—ó</th></tr>
                            </thead>
                            <tbody id="recipeList"></tbody>
                        </table>
                    </div>
                    <div class="button-group">
                        <button class="btn btn-warning" onclick="calculateRecipe()"><i class="fas fa-calculator"></i> –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –≤–∞—Ä—Ç—ñ—Å—Ç—å</button>
                        <button class="btn btn-danger" onclick="clearRecipe()"><i class="fas fa-trash-alt"></i> –û—á–∏—Å—Ç–∏—Ç–∏ —Ä–µ—Ü–µ–ø—Ç</button>
                    </div>
                </div>
                
                <!-- –ö–ê–†–¢–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–Ü–í -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon"><i class="fas fa-chart-bar"></i></div>
                        <h2 class="card-title">–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É</h2>
                    </div>
                    <div class="results-grid">
                        <div class="result-item">
                            <div class="result-label"><i class="fas fa-money-bill-wave"></i> –ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å</div>
                            <div class="result-value" id="totalCost">0.00</div>
                            <div style="font-size: 12px; color: #7f8c8d; margin-top: 5px;">–≥—Ä–Ω</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label"><i class="fas fa-weight"></i> –ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞–≥–∞</div>
                            <div class="result-value" id="totalWeight">0</div>
                            <div style="font-size: 12px; color: #7f8c8d; margin-top: 5px;">–≥</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label"><i class="fas fa-percentage"></i> –í–∞—Ä—Ç—ñ—Å—Ç—å 100–≥</div>
                            <div class="result-value" id="costPer100g">0.00</div>
                            <div style="font-size: 12px; color: #7f8c8d; margin-top: 5px;">–≥—Ä–Ω</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label"><i class="fas fa-balance-scale"></i> –í–∞—Ä—Ç—ñ—Å—Ç—å 1–∫–≥</div>
                            <div class="result-value" id="costPerKg">0.00</div>
                            <div style="font-size: 12px; color: #7f8c8d; margin-top: 5px;">–≥—Ä–Ω</div>
                        </div>
                    </div>
                    <div id="detailedResults" style="margin-top: 20px; font-size: 14px; color: #7f8c8d;"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- –§–£–¢–ï–† -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="text-center-mobile">
                    <h3 class="footer-logo">Vivchar Solutions</h3>
                    <p class="footer-description">–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è –∫–æ–Ω–¥–∏—Ç–µ—Ä—Å—å–∫–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É. –ù–∞—à –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ–ø–æ–º–∞–≥–∞—î —Ç–æ—á–Ω–æ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ —Å–æ–±—ñ–≤–∞—Ä—Ç—ñ—Å—Ç—å, –µ–∫–æ–Ω–æ–º–∏—Ç–∏ –∫–æ—à—Ç–∏ —Ç–∞ —Ä–æ–∑–≤–∏–≤–∞—Ç–∏ –≤–∞—à –±—ñ–∑–Ω–µ—Å. –†–æ–∑—Ä–æ–±–ª–µ–Ω–æ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ –¥–ª—è ‚öúÔ∏è @hz_kz01.</p>
                </div>
                <div class="text-center-mobile">
                    <a href="https://t.me/qwerty_c" target="_blank" class="telegram-btn"><i class="fab fa-telegram"></i> –ù–∞–ø–∏—Å–∞—Ç–∏ —É Telegram</a>
                </div>
            </div>
            <div class="footer-bottom">
                <div><i class="fas fa-copyright"></i> 2026. Baking cost calculator. Vivchar Solutions. All rights reserved.</div>
                <div style="display: flex; align-items: center; gap: 8px;"><i class="fas fa-heart" style="color: #e74c3c;"></i> <span>Made in Ukraine</span></div>
            </div>
        </div>
    </footer>

    <!-- –ö–ù–û–ü–ö–ê –ü–†–û–ö–†–£–¢–ö–ò –í–í–ï–†–• -->
    <div class="scroll-top" id="scrollTop"><i class="fas fa-chevron-up"></i></div>

    <!-- –í–°–Ü JAVASCRIPT –§–£–ù–ö–¶–Ü–á -->
    <script>
        // –ì–õ–û–ë–ê–õ–¨–ù–Ü –ó–ú–Ü–ù–ù–Ü
        let ingredients = {};
        let currentRecipe = [];

        // –ö–û–ù–í–ï–†–¢–ê–¶–Ü–Ø –û–î–ò–ù–ò–¶–¨
        const unitConversions = {
            'kg': 1000,   // 1 –∫–≥ = 1000 –≥
            'g': 1,       // 1 –≥ = 1 –≥
            'l': 1000,    // 1 –ª ‚âà 1000 –≥
            'ml': 1,      // 1 –º–ª ‚âà 1 –≥
            'pcs': 50,    // 1 —à—Ç. —è–π—Ü—è ‚âà 50 –≥
            'package': 100 // 1 —É–ø. ‚âà 100 –≥
        };

        // –ù–ê–ó–í–ò –û–î–ò–ù–ò–¶–¨
        const unitNames = {
            'kg': '–∫–≥', 'g': '–≥', 'l': '–ª', 'ml': '–º–ª', 'pcs': '—à—Ç.', 'package': '—É–ø.'
        };

        // –ú–Ü–¢–ö–ò –¶–Ü–ù
        const priceUnitLabels = {
            'kg': '–≥—Ä–Ω/–∫–≥', 'g': '–≥—Ä–Ω/–≥', 'l': '–≥—Ä–Ω/–ª', 'ml': '–≥—Ä–Ω/–º–ª', 'pcs': '–≥—Ä–Ω/—à—Ç.', 'package': '–≥—Ä–Ω/—É–ø.'
        };

        // ==================== –û–°–ù–û–í–ù–Ü –§–£–ù–ö–¶–Ü–á ====================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ DOM –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ');
            loadIngredients();
            updateCounterDisplay();
            document.getElementById('ingredientUnit').addEventListener('change', updatePriceUnitLabel);
            document.getElementById('recipeIngredient').addEventListener('change', updateRecipeUnitLabel);
            
            // –û–±—Ä–æ–±–Ω–∏–∫–∏ Enter
            ['ingredientName', 'ingredientPrice', 'recipeAmount'].forEach(id => {
                document.getElementById(id).addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        if (id === 'recipeAmount') addToRecipe();
                        else addIngredient();
                    }
                });
            });
            
            // –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            const scrollTopBtn = document.getElementById('scrollTop');
            window.addEventListener('scroll', () => {
                scrollTopBtn.classList.toggle('show', window.pageYOffset > 300);
            });
            scrollTopBtn.addEventListener('click', () => window.scrollTo({top: 0, behavior: 'smooth'}));
            
            updatePriceUnitLabel();
            console.log('‚úÖ –°–∞–π—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏!');
        });

        function updatePriceUnitLabel() {
            const unit = document.getElementById('ingredientUnit').value;
            document.getElementById('priceUnitLabel').textContent = priceUnitLabels[unit];
        }

        function updateRecipeUnitLabel() {
            const selected = document.getElementById('recipeIngredient').value;
            const unitLabel = document.getElementById('amountUnitLabel');
            if (selected && ingredients[selected]) {
                const unit = ingredients[selected].unit;
                unitLabel.textContent = unitNames[unit];
                unitLabel.style.color = '#2c3e50';
            } else {
                unitLabel.textContent = '--';
                unitLabel.style.color = '#7f8c8d';
            }
        }

        function addIngredient() {
            const nameInput = document.getElementById('ingredientName');
            const priceInput = document.getElementById('ingredientPrice');
            const unitSelect = document.getElementById('ingredientUnit');
            
            const name = nameInput.value.trim();
            const price = parseFloat(priceInput.value.replace(',', '.'));
            const unit = unitSelect.value;
            
            if (!name) { showNotification('‚ùå –í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∞', 'error'); nameInput.focus(); return; }
            if (isNaN(price) || price <= 0) { showNotification('‚ùå –í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—É —Ü—ñ–Ω—É', 'error'); priceInput.focus(); return; }
            if (!unit) { showNotification('‚ùå –û–±–µ—Ä—ñ—Ç—å –æ–¥–∏–Ω–∏—Ü—é –≤–∏–º—ñ—Ä—É', 'error'); unitSelect.focus(); return; }
            
            if (ingredients[name] && !confirm(`–Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç "${name}" –≤–∂–µ —ñ—Å–Ω—É—î. –ó–∞–º—ñ–Ω–∏—Ç–∏ –¥–∞–Ω—ñ?`)) return;
            
            ingredients[name] = { price: price, unit: unit };
            saveIngredientsToLocalStorage();
            updateIngredientsList();
            updateRecipeSelect();
            updateStats();
            
            nameInput.value = '';
            priceInput.value = '';
            showNotification(`‚úÖ –Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç –¥–æ–¥–∞–Ω–æ: ${name} (${price} ${priceUnitLabels[unit]})`, 'success');
            nameInput.focus();
        }

        function deleteIngredient(name) {
            if (!confirm(`–í–∏–¥–∞–ª–∏—Ç–∏ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç "${name}"?`)) return;
            delete ingredients[name];
            saveIngredientsToLocalStorage();
            updateIngredientsList();
            updateRecipeSelect();
            updateStats();
            updateRecipeUnitLabel();
            showNotification(`‚úÖ –Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç "${name}" –≤–∏–¥–∞–ª–µ–Ω–æ`, 'success');
        }

        function addToRecipe() {
            const ingredientSelect = document.getElementById('recipeIngredient');
            const amountInput = document.getElementById('recipeAmount');
            const name = ingredientSelect.value;
            const amount = parseFloat(amountInput.value.replace(',', '.'));
            
            if (!name) { showNotification('‚ùå –û–±–µ—Ä—ñ—Ç—å —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç', 'error'); return; }
            if (isNaN(amount) || amount <= 0) { showNotification('‚ùå –í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å', 'error'); amountInput.focus(); return; }
            
            const ingredient = ingredients[name];
            if (!ingredient) { showNotification('‚ùå –Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ', 'error'); return; }
            
            const unit = ingredient.unit;
            const pricePerUnit = ingredient.price;
            let cost;
            
            if (unit === 'pcs' || unit === 'package') {
                cost = pricePerUnit * amount;
            } else {
                const grams = convertToGrams(amount, unit);
                const pricePerGram = pricePerUnit / unitConversions[unit];
                cost = pricePerGram * grams;
            }
            
            currentRecipe.push({ name: name, amount: amount, unit: unit, cost: cost, ingredientData: ingredient });
            updateRecipeTable();
            updateRecipeCounter();
            amountInput.value = '';
            showNotification(`‚úÖ –î–æ–¥–∞–Ω–æ –¥–æ —Ä–µ—Ü–µ–ø—Ç—É: ${name} (${amount} ${unitNames[unit]})`, 'success');
        }

        function convertToGrams(amount, fromUnit) {
            return amount * unitConversions[fromUnit];
        }

        function removeFromRecipe(index) {
            const ingredientName = currentRecipe[index].name;
            currentRecipe.splice(index, 1);
            updateRecipeTable();
            updateRecipeCounter();
            showNotification(`‚úÖ –í–∏–¥–∞–ª–µ–Ω–æ –∑ —Ä–µ—Ü–µ–ø—Ç—É: ${ingredientName}`, 'success');
        }

        function calculateRecipe() {
            if (currentRecipe.length === 0) { showNotification('‚ùå –†–µ—Ü–µ–ø—Ç –ø–æ—Ä–æ–∂–Ω—ñ–π', 'error'); return; }
            
            let totalCost = 0;
            let totalGrams = 0;
            const details = [];
            
            currentRecipe.forEach(item => {
                totalCost += item.cost;
                if (item.unit === 'pcs') {
                    totalGrams += item.amount * 50;
                } else if (item.unit === 'package') {
                    totalGrams += item.amount * 100;
                } else {
                    totalGrams += convertToGrams(item.amount, item.unit);
                }
                details.push({ name: item.name, amount: item.amount, unit: item.unit, cost: item.cost });
            });
            
            let costPer100g = 0;
            let costPerKg = 0;
            if (totalGrams > 0) {
                costPer100g = (totalCost / totalGrams) * 100;
                costPerKg = (totalCost / totalGrams) * 1000;
            }
            
            document.getElementById('totalCost').textContent = totalCost.toFixed(2);
            document.getElementById('totalWeight').textContent = Math.round(totalGrams);
            document.getElementById('costPer100g').textContent = costPer100g.toFixed(2);
            document.getElementById('costPerKg').textContent = costPerKg.toFixed(2);
            
            updateDetailedResults({ total_cost: totalCost, total_grams: totalGrams, details: details });
            updateCalculationCounter();
            showNotification(`‚úÖ –†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ: ${totalCost.toFixed(2)} –≥—Ä–Ω`, 'success');
        }

        function clearRecipe() {
            if (currentRecipe.length === 0) { showNotification('‚ùå –†–µ—Ü–µ–ø—Ç –≤–∂–µ –ø–æ—Ä–æ–∂–Ω—ñ–π', 'error'); return; }
            if (!confirm('–û—á–∏—Å—Ç–∏—Ç–∏ –≤–µ—Å—å —Ä–µ—Ü–µ–ø—Ç?')) return;
            
            currentRecipe = [];
            updateRecipeTable();
            updateRecipeCounter();
            document.getElementById('totalCost').textContent = '0.00';
            document.getElementById('totalWeight').textContent = '0';
            document.getElementById('costPer100g').textContent = '0.00';
            document.getElementById('costPerKg').textContent = '0.00';
            document.getElementById('detailedResults').innerHTML = '';
            showNotification('‚úÖ –†–µ—Ü–µ–ø—Ç –æ—á–∏—â–µ–Ω–æ', 'success');
        }

        // ==================== –î–û–ü–û–ú–Ü–ñ–ù–Ü –§–£–ù–ö–¶–Ü–á ====================
        function updateIngredientsList() {
            const tbody = document.getElementById('ingredientsList');
            const ingredientKeys = Object.keys(ingredients);
            
            if (ingredientKeys.length === 0) {
                tbody.innerHTML = `<tr><td colspan="4" class="empty-state"><i class="fas fa-inbox"></i><p>–ù–µ–º–∞—î –¥–æ–¥–∞–Ω–∏—Ö —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤</p><small>–î–æ–¥–∞–π—Ç–µ –ø–µ—Ä—à–∏–π —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç –≤–∏—â–µ</small></td></tr>`;
            } else {
                tbody.innerHTML = '';
                for (const name of ingredientKeys) {
                    const ingredient = ingredients[name];
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td><div>${name}</div><div class="unit-tag">${unitNames[ingredient.unit]}</div></td>
                        <td>${ingredient.price.toFixed(2)} –≥—Ä–Ω</td>
                        <td>${unitNames[ingredient.unit]}</td>
                        <td><button class="action-btn action-delete" onclick="deleteIngredient('${name}')"><i class="fas fa-trash-alt"></i> –í–∏–¥–∞–ª–∏—Ç–∏</button></td>
                    `;
                    tbody.appendChild(row);
                }
            }
        }

        function updateRecipeSelect() {
            const select = document.getElementById('recipeIngredient');
            const currentValue = select.value;
            select.innerHTML = '<option value="">–û–±–µ—Ä—ñ—Ç—å —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç...</option>';
            
            for (const [name, ingredient] of Object.entries(ingredients)) {
                const option = document.createElement('option');
                option.value = name;
                option.textContent = `${name} (${ingredient.price.toFixed(2)} –≥—Ä–Ω/${unitNames[ingredient.unit]})`;
                select.appendChild(option);
            }
            
            if (currentValue && ingredients[currentValue]) select.value = currentValue;
            updateRecipeUnitLabel();
        }

        function updateRecipeTable() {
            const tbody = document.getElementById('recipeList');
            if (currentRecipe.length === 0) {
                tbody.innerHTML = `<tr><td colspan="4" class="empty-state"><i class="fas fa-receipt"></i><p>–†–µ—Ü–µ–ø—Ç –ø–æ—Ä–æ–∂–Ω—ñ–π</p><small>–î–æ–¥–∞–π—Ç–µ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏ –∑—ñ —Å–ø–∏—Å–∫—É</small></td></tr>`;
            } else {
                tbody.innerHTML = '';
                currentRecipe.forEach((item, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td><div>${item.name}</div><div class="unit-tag">${unitNames[item.unit]}</div></td>
                        <td>${item.amount} ${unitNames[item.unit]}</td>
                        <td>${item.cost.toFixed(2)} –≥—Ä–Ω</td>
                        <td><button class="action-btn action-delete" onclick="removeFromRecipe(${index})"><i class="fas fa-times"></i> –í–∏–¥–∞–ª–∏—Ç–∏</button></td>
                    `;
                    tbody.appendChild(row);
                });
            }
        }

        function updateDetailedResults(result) {
            const container = document.getElementById('detailedResults');
            if (result.details && result.details.length > 0) {
                let html = '<div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e8edf2;"><h4 style="margin-bottom: 10px; color: #34495e; font-size: 14px;"><i class="fas fa-list-ol"></i> –î–µ—Ç–∞–ª—å–Ω–∏–π —Ä–æ–∑–∫–ª–∞–¥:</h4><div style="font-size: 13px;">';
                result.details.forEach(item => {
                    const percentage = result.total_cost > 0 ? ((item.cost / result.total_cost) * 100).toFixed(1) : '0.0';
                    html += `<div style="display: flex; justify-content: space-between; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #f0f0f0;">
                        <span>${item.name} (${item.amount} ${unitNames[item.unit]})</span>
                        <span>${item.cost.toFixed(2)} –≥—Ä–Ω (${percentage}%)</span>
                    </div>`;
                });
                html += '</div></div>';
                container.innerHTML = html;
            } else {
                container.innerHTML = '';
            }
        }

        function updateStats() {
            const ingredientCount = Object.keys(ingredients).length;
            document.getElementById('ingredientCount').textContent = ingredientCount;
            document.getElementById('totalIngredients').textContent = ingredientCount;
            if (ingredientCount > 0) {
                const totalPrice = Object.values(ingredients).reduce((sum, ingredient) => sum + ingredient.price, 0);
                const avgPrice = totalPrice / ingredientCount;
                document.getElementById('avgPrice').textContent = avgPrice.toFixed(2);
            } else {
                document.getElementById('avgPrice').textContent = '0.00';
            }
        }

        function updateRecipeCounter() {
            document.getElementById('recipeCount').textContent = currentRecipe.length;
        }

        function updateCounterDisplay() {
            let calculationCounter = localStorage.getItem('calculationCounter') || 0;
            document.getElementById('calculationCounter').textContent = calculationCounter;
        }

        function updateCalculationCounter() {
            let calculationCounter = parseInt(localStorage.getItem('calculationCounter') || 0);
            calculationCounter++;
            localStorage.setItem('calculationCounter', calculationCounter);
            document.getElementById('calculationCounter').textContent = calculationCounter;
            const counterElement = document.getElementById('calculationCounter');
            counterElement.style.transform = 'scale(1.2)';
            setTimeout(() => counterElement.style.transform = 'scale(1)', 300);
        }

        function showNotification(message, type = 'info') {
            const oldNotifications = document.querySelectorAll('.notification');
            oldNotifications.forEach(n => n.remove());
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            let bg, icon;
            if (type === 'success') { bg = 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)'; icon = 'fa-check-circle'; }
            else if (type === 'error') { bg = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)'; icon = 'fa-exclamation-circle'; }
            else { bg = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'; icon = 'fa-info-circle'; }
            
            notification.innerHTML = `<i class="fas ${icon}"></i> ${message}`;
            notification.style.cssText = `position: fixed; top: 20px; right: 15px; left: 15px; padding: 15px 20px; border-radius: 12px; color: white; font-weight: 600; z-index: 10000; animation: slideIn 0.3s ease-out; box-shadow: 0 10px 25px rgba(0,0,0,0.15); display: flex; align-items: center; gap: 12px; text-align: center; background: ${bg};`;
            
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notification.parentNode && document.body.removeChild(notification), 300);
            }, 4000);
        }

        // ==================== LOCALSTORAGE –§–£–ù–ö–¶–Ü–á ====================
        function saveIngredientsToLocalStorage() {
            localStorage.setItem('baking_ingredients', JSON.stringify(ingredients));
            console.log('üíæ –Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–æ —É LocalStorage');
        }

        function loadIngredientsFromLocalStorage() {
            const saved = localStorage.getItem('baking_ingredients');
            if (saved) {
                try { ingredients = JSON.parse(saved); console.log('üìÇ –Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –∑ LocalStorage:', Object.keys(ingredients).length); return true; }
                catch (e) { console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ LocalStorage:', e); }
            }
            return false;
        }

        function loadIngredients() {
            if (loadIngredientsFromLocalStorage()) {
                updateIngredientsList(); updateRecipeSelect(); updateStats(); showNotification('‚úÖ –î–∞–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –∑ –∫–µ—à—É', 'success');
            } else { updateIngredientsList(); updateRecipeSelect(); updateStats(); }
        }

        // ==================== –ï–ö–°–ü–û–†–¢/–Ü–ú–ü–û–†–¢ ====================
        function exportData() {
            const data = { ingredients: ingredients, recipes: currentRecipe, settings: { calculationCounter: localStorage.getItem('calculationCounter') || 0, exportDate: new Date().toISOString(), version: '2.0' } };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ingredients_backup_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url);
            showNotification('‚úÖ –î–∞–Ω—ñ –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ —É —Ñ–∞–π–ª', 'success');
        }

        function exportToCSV() {
            let csvContent = "–ù–∞–∑–≤–∞ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∞;–¶—ñ–Ω–∞;–û–¥–∏–Ω–∏—Ü—è;–î–∞—Ç–∞ –µ–∫—Å–ø–æ—Ä—Ç—É\n";
            for (const [name, ingredient] of Object.entries(ingredients)) {
                csvContent += `"${name}";${ingredient.price};${ingredient.unit};${new Date().toISOString().slice(0, 10)}\n`;
            }
            const blob = new Blob(["\uFEFF" + csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ingredients_${new Date().toISOString().slice(0, 10)}.csv`;
            document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url);
            showNotification('‚úÖ –î–∞–Ω—ñ –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ —É CSV —Ñ–∞–π–ª', 'success');
        }

        function importData() {
            const fileInput = document.createElement('input');
            fileInput.type = 'file'; fileInput.accept = '.json,.csv'; fileInput.style.display = 'none';
            fileInput.onchange = function(event) {
                const file = event.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const content = e.target.result;
                        let importedData;
                        if (file.name.endsWith('.csv')) {
                            importedData = parseCSV(content);
                        } else {
                            importedData = JSON.parse(content);
                        }
                        showImportConfirmation(importedData, file.name);
                    } catch (error) {
                        console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ —á–∏—Ç–∞–Ω–Ω—è —Ñ–∞–π–ª—É:', error);
                        showNotification('‚ùå –ü–æ–º–∏–ª–∫–∞: –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª—É', 'error');
                    }
                };
                reader.readAsText(file);
            };
            document.body.appendChild(fileInput); fileInput.click(); document.body.removeChild(fileInput);
        }

        function parseCSV(csvText) {
            const lines = csvText.split('\n');
            const ingredients = {};
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                const parts = line.split(';');
                if (parts.length >= 3) {
                    const name = parts[0].replace(/"/g, '').trim();
                    const price = parseFloat(parts[1]);
                    const unit = parts[2].trim();
                    if (name && !isNaN(price) && unit) {
                        ingredients[name] = { price: price, unit: unit };
                    }
                }
            }
            return { ingredients: ingredients };
        }

        function showImportConfirmation(data, filename) {
            const importedIngredients = data.ingredients || {};
            const count = Object.keys(importedIngredients).length;
            if (count === 0) { showNotification('‚ùå –£ —Ñ–∞–π–ª—ñ –Ω–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É', 'error'); return; }
            
            const modal = document.createElement('div');
            modal.style.cssText = `position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 10000; padding: 20px;`;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `background: white; padding: 25px; border-radius: 15px; max-width: 500px; width: 100%; max-height: 80vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0,0,0,0.3);`;
            
            modalContent.innerHTML = `
                <h3 style="margin-bottom: 20px; color: #2c3e50;"><i class="fas fa-file-import"></i> –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —ñ–º–ø–æ—Ä—Ç—É</h3>
                <div style="margin-bottom: 20px;"><p><strong>–§–∞–π–ª:</strong> ${filename}</p><p><strong>–ó–Ω–∞–π–¥–µ–Ω–æ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤:</strong> ${count}</p></div>
                <div style="max-height: 200px; overflow-y: auto; margin-bottom: 25px; padding: 15px; background: #f9fafc; border-radius: 10px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px;">–°–ø–∏—Å–æ–∫ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤:</h4>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        ${Object.entries(importedIngredients).map(([name, ingredient]) => 
                            `<li style="padding: 5px 0; border-bottom: 1px solid #eee;">
                                <span style="font-weight: 500;">${name}</span>: ${ingredient.price.toFixed(2)} –≥—Ä–Ω/${unitNames[ingredient.unit] || ingredient.unit}
                            </li>`
                        ).join('')}
                    </ul>
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                        <input type="radio" name="importMode" value="replace" checked>
                        <span>–ó–∞–º—ñ–Ω–∏—Ç–∏ –≤—Å—ñ –ø–æ—Ç–æ—á–Ω—ñ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px;">
                        <input type="radio" name="importMode" value="merge">
                        <span>–û–±'—î–¥–Ω–∞—Ç–∏ –∑ –ø–æ—Ç–æ—á–Ω–∏–º–∏ (–≤–∏–¥–∞–ª–∏—Ç–∏ –¥—É–±–ª—ñ)</span>
                    </label>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <button id="confirmImport" style="padding: 12px; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        <i class="fas fa-check"></i> –Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏
                    </button>
                    <button id="cancelImport" style="padding: 12px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        <i class="fas fa-times"></i> –°–∫–∞—Å—É–≤–∞—Ç–∏
                    </button>
                </div>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            
            document.getElementById('confirmImport').onclick = function() {
                const importMode = document.querySelector('input[name="importMode"]:checked').value;
                processImport(importedIngredients, importMode);
                document.body.removeChild(modal);
            };
            
            document.getElementById('cancelImport').onclick = function() {
                document.body.removeChild(modal);
            };
            
            modal.onclick = function(e) {
                if (e.target === modal) document.body.removeChild(modal);
            };
        }

        function processImport(importedIngredients, mode) {
            if (mode === 'replace') {
                ingredients = importedIngredients;
            } else if (mode === 'merge') {
                ingredients = { ...ingredients, ...importedIngredients };
            }
            saveIngredientsToLocalStorage();
            updateIngredientsList();
            updateRecipeSelect();
            updateStats();
            const count = Object.keys(importedIngredients).length;
            showNotification(`‚úÖ –£—Å–ø—ñ—à–Ω–æ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ ${count} —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤`, 'success');
        }

        // ==================== –ì–õ–û–ë–ê–õ–¨–ù–ï –ï–ö–°–ü–û–†–¢–£–í–ê–ù–ù–Ø ====================
        window.addIngredient = addIngredient;
        window.addToRecipe = addToRecipe;
        window.calculateRecipe = calculateRecipe;
        window.clearRecipe = clearRecipe;
        window.deleteIngredient = deleteIngredient;
        window.removeFromRecipe = removeFromRecipe;
        window.showNotification = showNotification;
        window.updateCalculationCounter = updateCalculationCounter;
        window.exportData = exportData;
        window.exportToCSV = exportToCSV;
        window.importData = importData;
    </script>
</body>
</html>
